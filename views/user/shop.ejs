<%- include('../layouts/userLayout/header.ejs') -%>
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/logoVV.png" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/linearicons-v1.0.0/icon-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/slick/slick.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/MagnificPopup/magnific-popup.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <!--===============================================================================================-->
    <style>
        /* Add this CSS to your existing stylesheet or in a style tag in your HTML file */
        .container-menu-desktop {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            /* Adjust the values as needed */
            transition: box-shadow 0.3s ease;
            /* Optional: Add transition for a smoother effect */
        }

        .active-category {
            background-color: #3498db;
            /* Set your desired background color */
            color: #ffffff;
            /* Set your desired text color */
            /* Add any other styling you want for the active state */
        }
    </style>

    <%- include('../layouts/userLayout/center.ejs') -%>

        <%- include('../layouts/userLayout/navbar.ejs') -%>
            <!-- Modal Search -->
            <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
                <div class="container-search-header">
                    <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
                        <img src="images/icons/icon-close2.png" alt="CLOSE">
                    </button>

                    <form class="wrap-search-header flex-w p-l-15">
                        <button class="flex-c-m trans-04">
                            <i class="zmdi zmdi-search"></i>
                        </button>
                        <input class="plh3" type="text" name="search" placeholder="Search...">
                    </form>
                </div>
            </div>

            <!-- Product -->
            <div class="bg0 m-t-23 p-b-140">
                <div class="container">
                    <div class="flex-w flex-sb-m p-b-52">


                        <div class="flex-w flex-c-m m-tb-10">
                            <div
                                class="flex-c-m stext-106 cl6 size-104 bor4 pointer hov-btn3 trans-04 m-r-8 m-tb-4 js-show-filter">
                                <i class="icon-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-filter-list"></i>
                                <i class="icon-close-filter cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
                                Filter
                            </div>

                            <div
                                class="flex-c-m stext-106 cl6 size-105 bor4 pointer hov-btn3 trans-04 m-tb-4 js-show-search">
                                <i class="icon-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-search"></i>
                                <i class="icon-close-search cl2 m-r-6 fs-15 trans-04 zmdi zmdi-close dis-none"></i>
                                Search
                            </div>
                        </div>

                        <!-- Search product -->
                        <div class="dis-none panel-search w-full p-t-10 p-b-15">
                            <div class="bor8 dis-flex p-l-15">
                                <button class="size-113 flex-c-m fs-16 cl2 hov-cl1 trans-04" name="search">
                                    <i class="zmdi zmdi-search"></i>
                                </button>
                                <form action="/shop" method="get" class="d-flex ">
                                    <input class="mtext-107 cl2 size-114 plh2 p-r-15" type="text" name="search"
                                        placeholder="Search" value="<%=search%>">
                                    <button class="btn btn-outline-primary">search</button>
                                </form>
                            </div>
                        </div>

                        <!-- Filter -->
                        <div class="dis-none panel-filter w-full p-t-10">
                            <div class="wrap-filter flex-w bg6 w-full p-lr-40 p-t-27 p-lr-15-sm">
                                <div class="filter-col1 p-r-15 p-b-27">
                                    <div class="mtext-102 cl2 p-b-15">
                                        Sort By
                                    </div>

                                    <ul>
                                        <li class="p-b-6">
                                            <a href="/shop?sort=1&categId=<%=categId%>"
                                                class="filter-link stext-106 trans-04">
                                                Price: Low to High
                                            </a>
                                        </li>

                                        <li class="p-b-6">
                                            <a href="/shop?sort=-1&categId=<%=categId%>"
                                                class="filter-link stext-106 trans-04">
                                                Price: High to Low
                                            </a>
                                        </li>
                                    </ul>
                                </div>

                                <div class="filter-col2 p-r-15 p-b-27">
                                    <div class="mtext-102 cl2 p-b-15">
                                        category
                                    </div>

                                    <ul>
                                        <li class="p-b-6">
                                            <a href="/shop">
                                                <button
                                                    class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1"
                                                    data-filter="*">
                                                    All Products
                                                </button>
                                            </a>
                                        </li>

                                        <% if (Categories.length> 0) { %>
                                            <% for (let i=0; i < Categories.length; i++) { %>
                                                <li class="p-b-6">
                                                    <a href="/shop?categid=<%= Categories[i]._id %>&sort=<%= sort %>">
                                                        <button
                                                            class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1"
                                                            data-filter="*">
                                                            <%= Categories[i].name %>
                                                        </button>
                                                    </a>
                                                </li>
                                                <% } %>
                                                    <% } else { %>
                                                        <li class="p-b-6">
                                                            <button
                                                                class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1"
                                                                data-filter="*">
                                                                There are no categories
                                                            </button>
                                                        </li>
                                                        <% } %>
                                    </ul>
                                </div>

                            </div>
                        </div>
                    </div>

                    <h3
                        style="color: black;font-family:'Times New Roman', Times, serif; margin-bottom:3%; text-decoration: underline;">
                        <%=categName%>
                    </h3>
                    <div class="row isotope-grid">
                        <% if(products.length> 0){ %>
                            <% for(let i=0;i<products.length;i++){ %>
                                <div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item women">
                                    <!-- Block2 -->
                                    <div class="block2">
                                        <div class="block2-pic hov-img0">
                                            <img src="/sharpimages/<%=products[i].image[0]%>" alt="IMG-PRODUCT">
                                            <a href="/productDetails?productid=<%=products[i]._id%>"
                                                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 ">
                                                Quick View
                                            </a>
                                        </div>


                                        <div class="block2-txt flex-w flex-t p-t-14">
                                            <div class="block2-txt-child1 flex-col-l ">
                                                <a href="product-detail.html"
                                                    class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
                                                    <%=products[i].name%>
                                                </a>
                                                <span class="stext-105 cl3">
                                                    <% if (products[i].offer || products[i].category.offer) { %>
                                                        <span style="text-decoration: line-through; color: red;">
                                                            ₹ <%= products[i].price %>
                                                        </span>
                                                        <span style="color: green;">
                                                            <b>
                                                                <%= products[i].offer ? products[i].offer.percentage :
                                                                    products[i].category.offer.percentage %>%off
                                                            </b>
                                                        </span>
                                                        <% } else { %>
                                                            <b> ₹ <%= products[i].price %></b>
                                                            <% } %>
                                                </span>

                                            </div>


                                            <div class="block2-txt-child2 flex-r p-t-3">
                                                <a href="#" class="btn-addwish-b2 dis-block pos-relative js-addwish-b2">
                                                    <img class="icon-heart1 dis-block trans-04"
                                                        src="images/icons/icon-heart-01.png" alt="ICON">
                                                    <img class="icon-heart2 dis-block trans-04 ab-t-l"
                                                        src="images/icons/icon-heart-02.png" alt="ICON">
                                                </a>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <% }%>

                                    <%}else{%>
                                        <div>
                                            <h1>There are no products</h1>
                                        </div>
                                        <% } %>

                    </div>
                    <!-- pagination -->
                    <nav aria-label="Page navigation example" style="margin-left: 43%; margin-top: 4%;">
                        <ul class="pagination">
                            <% if (currentPage> 1) { %>
                                <li class="page-item">
                                    <a class="page-link" href="?page=<%= currentPage - 1 %>&sort=<%= sort %>"
                                        aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                </li>
                                <% } %>

                                    <% for(let i=1; i <=totalPages; i++) { %>
                                        <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                                            <a class="page-link" href="?page=<%= i %>&sort=<%= sort %>">
                                                <%= i %>
                                            </a>
                                        </li>
                                        <% } %>

                                            <% if (currentPage < totalPages) { %>
                                                <li class="page-item">
                                                    <a class="page-link"
                                                        href="?page=<%= currentPage + 1 %>&sort=<%= sort %>"
                                                        aria-label="Next">
                                                        <span aria-hidden="true">&raquo;</span>
                                                        <span class="sr-only">Next</span>
                                                    </a>
                                                </li>
                                                <% } %>
                        </ul>
                    </nav>

                </div>
            </div>


            <%- include('../layouts/userLayout/page-footer.ejs') -%>
                <!--===============================================================================================-->
                <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
                <!--===============================================================================================-->
                <script src="vendor/animsition/js/animsition.min.js"></script>
                <!--===============================================================================================-->
                <script src="vendor/bootstrap/js/popper.js"></script>
                <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
                <!--===============================================================================================-->
                <script src="vendor/select2/select2.min.js"></script>
                <script>
                    $(".js-select2").each(function () {
                        $(this).select2({
                            minimumResultsForSearch: 20,
                            dropdownParent: $(this).next('.dropDownSelect2')
                        });
                    })
                </script>
                <!--===============================================================================================-->
                <script src="vendor/daterangepicker/moment.min.js"></script>
                <script src="vendor/daterangepicker/daterangepicker.js"></script>
                <!--===============================================================================================-->
                <script src="vendor/slick/slick.min.js"></script>

                <!--===============================================================================================-->
                <script src="vendor/parallax100/parallax100.js"></script>
                <script>
                    $('.parallax100').parallax100();
                </script>
                <!--===============================================================================================-->
                <script src="vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
                <script>
                    $('.gallery-lb').each(function () { // the containers for all your galleries
                        $(this).magnificPopup({
                            delegate: 'a', // the selector for gallery item
                            type: 'image',
                            gallery: {
                                enabled: true
                            },
                            mainClass: 'mfp-fade'
                        });
                    });
                </script>
                <!--===============================================================================================-->
                <script src="vendor/isotope/isotope.pkgd.min.js"></script>
                <!--===============================================================================================-->
                <script src="vendor/sweetalert/sweetalert.min.js"></script>
                <script>
                    $('.js-addwish-b2, .js-addwish-detail').on('click', function (e) {
                        e.preventDefault();
                    });

                    $('.js-addwish-b2').each(function () {
                        var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
                        $(this).on('click', function () {
                            swal(nameProduct, "is added to wishlist !", "success");

                            $(this).addClass('js-addedwish-b2');
                            $(this).off('click');
                        });
                    });

                    $('.js-addwish-detail').each(function () {
                        var nameProduct = $(this).parent().parent().parent().find('.js-name-detail').html();

                        $(this).on('click', function () {
                            swal(nameProduct, "is added to wishlist !", "success");

                            $(this).addClass('js-addedwish-detail');
                            $(this).off('click');
                        });
                    });

                    /*---------------------------------------------*/

                    $('.js-addcart-detail').each(function () {
                        var nameProduct = $(this).parent().parent().parent().parent().find('.js-name-detail').html();
                        $(this).on('click', function () {
                            swal(nameProduct, "is added to cart !", "success");
                        });
                    });

                </script>
                <!--===============================================================================================-->
                <script src="vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
                <script>
                    $('.js-pscroll').each(function () {
                        $(this).css('position', 'relative');
                        $(this).css('overflow', 'hidden');
                        var ps = new PerfectScrollbar(this, {
                            wheelSpeed: 1,
                            scrollingThreshold: 1000,
                            wheelPropagation: false,
                        });

                        $(window).on('resize', function () {
                            ps.update();
                        })
                    });
                </script>
                <!--===============================================================================================-->
                <script src="js/slick-custom.js"></script>
                <script src="js/main.js"></script>

                <%- include('../layouts/userLayout/footer.ejs') -%>